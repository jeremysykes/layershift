<!doctype html>
<html lang="en" style="background:#0a0a0a">
  <head>
    <style>body{visibility:hidden}body.ready{visibility:visible}</style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Layershift — Embeddable Video Effects</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" href="/favicon.svg" />
    <meta name="description" content="Ready-to-embed Web Components that make video feel alive on any website. No framework dependencies. One script tag." />
    <meta name="theme-color" content="#0a0a0a" />
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Layershift — Embeddable Video Effects" />
    <meta property="og:description" content="Ready-to-embed Web Components that make video feel alive on any website. No framework dependencies. One script tag." />
    <meta property="og:image" content="https://layershift.io/og-image.svg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://layershift.io" />
    <meta property="og:site_name" content="Layershift" />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Layershift — Embeddable Video Effects" />
    <meta name="twitter:description" content="Ready-to-embed Web Components that make video feel alive on any website. No framework dependencies. One script tag." />
    <meta name="twitter:image" content="https://layershift.io/og-image.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
    <!-- Preload manifests so they're cached before React requests them -->
    <link rel="preload" href="/effects-manifest.json" as="fetch" crossorigin />
    <link rel="preload" href="/videos/manifest.json" as="fetch" crossorigin />
  </head>
  <body>
    <div id="root"></div>
    <!--
      Early hero video preloading: fetch the manifest immediately, pick a random
      hero video, and inject <link rel="preload"> for the video + depth assets.
      This starts downloads before React hydrates. The selection is stored on
      window.__LAYERSHIFT_HERO__ for React to consume, ensuring the preloaded
      video is the one actually rendered.
    -->
    <script>
    (function() {
      Promise.all([
        fetch('/effects-manifest.json').then(function(r) { return r.json(); }),
        fetch('/videos/manifest.json').then(function(r) { return r.json(); })
      ]).then(function(results) {
        var em = results[0], vm = results[1];
        var enabled = em.effects.filter(function(e) { return e.enabled; });
        var defaultId = em.defaultEffect;
        if (!enabled.some(function(e) { return e.id === defaultId; })) {
          defaultId = enabled.length ? enabled[0].id : 'parallax';
        }
        var catMap = { parallax: 'parallax', portal: 'textural', 'tilt-shift': 'parallax' };
        var pool = (vm[catMap[defaultId] || 'parallax']) || [];
        if (!pool.length) return;

        var hero = pool[Math.floor(Math.random() * pool.length)];
        window.__LAYERSHIFT_HERO__ = hero;

        // Inject preload hints for the hero video + depth assets
        var head = document.head;
        var link;

        link = document.createElement('link');
        link.rel = 'preload'; link.as = 'video'; link.type = 'video/mp4';
        link.crossOrigin = 'anonymous';
        link.href = hero.src; head.appendChild(link);

        link = document.createElement('link');
        link.rel = 'preload'; link.as = 'fetch'; link.crossOrigin = 'anonymous';
        link.href = hero.depthSrc; head.appendChild(link);

        link = document.createElement('link');
        link.rel = 'preload'; link.as = 'fetch'; link.crossOrigin = 'anonymous';
        link.href = hero.depthMeta; head.appendChild(link);
      }).catch(function() { /* preloading is best-effort */ });
    })();
    </script>
    <script type="module" src="/src/site/main.tsx"></script>
  </body>
</html>
